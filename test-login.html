<!DOCTYPE html>
<html>
<body>
<h2>Test Login Format</h2>
<button onclick="testLogin()">Tester Connexion</button>
<div id="result"></div>

<script>
async function testLogin() {
  const email = "user28529810@test.com";
  const password = "Test123!";
  
  const formats = [
    { name: 'email/password', data: { email, password } },
    { name: '_username/_password', data: { _username: email, _password: password } },
    { name: 'username/password', data: { username: email, password } }
  ];
  
  let resultDiv = document.getElementById('result');
  resultDiv.innerHTML = '<p>Test en cours...</p>';
  
  for (const format of formats) {
    try {
      const response = await fetch(
        'https://morocancryptobackend-production-f3b6.up.railway.app/api/login_check',
        {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(format.data)
        }
      );
      
      if (response.ok) {
        const data = await response.json();
        resultDiv.innerHTML = `
          <p style="color:green">✅ SUCCÈS avec format: ${format.name}</p>
          <p>Token reçu: ${data.token.substring(0, 50)}...</p>
        `;
        return;
      }
    } catch (error) {
      console.log(`Format ${format.name} échoué`);
    }
  }
  
  resultDiv.innerHTML = '<p style="color:red">❌ Aucun format ne fonctionne</p>';
}
</script>
</body>
</html>